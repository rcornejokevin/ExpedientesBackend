DECLARE
V_COUNT INTEGER;
BEGIN
SELECT COUNT(TABLE_NAME) INTO V_COUNT from USER_TABLES where TABLE_NAME = '__EFMigrationsHistory';
IF V_COUNT = 0 THEN
Begin
BEGIN 
EXECUTE IMMEDIATE 'CREATE TABLE 
"__EFMigrationsHistory" (
    "MigrationId" NVARCHAR2(150) NOT NULL,
    "ProductVersion" NVARCHAR2(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
)';
END;

End;

END IF;
EXCEPTION
WHEN OTHERS THEN
    IF(SQLCODE != -942)THEN
        RAISE;
    END IF;
END;
/

BEGIN 
EXECUTE IMMEDIATE 'CREATE TABLE 
"USUARIOSNIDA" (
    "IDUSUARIO" NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY NOT NULL,
    "NOMBREUSUARIO" NVARCHAR2(2000),
    "IDROL" NUMBER(10),
    "IDSISTEMA" NUMBER(10),
    "NIT" NVARCHAR2(2000),
    "CLAVE" NVARCHAR2(2000),
    "NOMBRE" NVARCHAR2(2000),
    "FECHACREACION" TIMESTAMP(7),
    "CAMBIARCLAVE" BOOLEAN,
    "BLOQUEADO" BOOLEAN,
    "FIRMA" NVARCHAR2(2000),
    "ULTIMO_CAMBIO_CLAVE" TIMESTAMP(7),
    "FIRMA_ELECTRONICA" NVARCHAR2(2000),
    "DIRECTOR_GESTION" NVARCHAR2(2000),
    "USERNAME_FEA" NVARCHAR2(2000),
    "PASSWORD_FEA" NVARCHAR2(2000),
    "CLAVE_FEA" NVARCHAR2(2000),
    "PIN_FEA" NVARCHAR2(2000),
    "VERSION_FEA" NVARCHAR2(2000),
    "USUARIO_FEA" NVARCHAR2(2000),
    "CODIGO_VERIFICACION" NVARCHAR2(2000),
    "ESTADO_CODIGO" NVARCHAR2(2000),
    CONSTRAINT "PK_USUARIOSNIDA" PRIMARY KEY ("IDUSUARIO")
)';
END;
/

INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES (N'20250914044031_QueryCompleto', N'9.0.7')
/

